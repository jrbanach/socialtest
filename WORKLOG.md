# Social Studies Quiz â€” Work & Decision Log

## Project Overview
A mobile-friendly study quiz for 5th grade social studies (Chapters 5 & 6 â€” Colonial America). Built as a standalone HTML file deployed to Azure Static Web Apps.

## Key Decisions

### Architecture
- **Single HTML file** â€” no server, no build step, no dependencies. All HTML/CSS/JS inline in `index.html`.
- **localStorage** for persistence â€” saves quiz progress and any parent edits across browser sessions (per device).
- **Standalone deployment** â€” Azure Static Web App (free tier), auto-deploys on push to `main`.

### Content Source
- Study material from `socialtest.pdf` (scanned, 2 pages).
- PDF was OCR'd using Docker + Tesseract â†’ converted to `socialtest.docx` for review.
- User reviewed and edited the Word doc before content was used.

### Quiz Design
- **Section 1 â€” Vocabulary (20 terms):** Fill-in-the-blank with clickable word bank. Definitions written at 5th grade reading level based on colonial America curriculum.
- **Section 2 â€” Multiple Choice (17 questions):** 4 choices each â€” 1 correct, 2 plausible, 1 obviously wrong (kid-friendly humor).
- **Scoring:** Shows results with encouragement messages. Retry mode shows only missed questions.
- **Parent Mode:** Password-protected (`dad`). Two tabs: Answer Key and Edit Questions (edit any term, definition, question, or answer choice â€” saved to localStorage).

### Terms Included
Charter, Indentured Servant, Roanoke Island, Almanac, Pilgrim, Persecution, Debtor, Apprentice, Artisan, Squanto, Cash Crop, John Smith, Mayflower Compact, William Penn, Puritans, Francis Drake, Proprietor, Town Common, James Oglethorpe, Elizabeth Lucas Pinckney

### Deployment
- **GitHub repo:** `jrbanach/socialtest`
- **Azure Static Web App:** Free tier, linked to GitHub repo, auto-deploys on push to `main`
- **CI/CD:** GitHub Actions workflow generated by Azure SWA

### Tools Used
- Docker (python:3.12-slim) for PDF OCR (Tesseract + pdfplumber)
- GitHub CLI (`gh`) for repo creation
- Azure CLI (`az`) for Static Web App creation
- Copilot CLI for code generation

## How to Update
1. Edit `index.html` locally or via Parent Mode in the browser
2. If editing the file directly: push to `main` and Azure auto-deploys
3. If editing via Parent Mode: changes are saved in localStorage (browser-only, won't affect the deployed default)
4. To change default questions permanently: edit the `DEFAULT_VOCAB`, `DEFAULT_MC`, and `DEFAULT_JEOPARDY` arrays in `index.html`

## Game Quiz Feature (Jeopardy-Style with Battle Gamification)

### What It Is
A third quiz section called "Game Quiz" that flips the format Jeopardy-style:
- **Clue shown** = the definition or answer
- **Choices** = terms or question paraphrases (1 correct, 2 close, 1 very wrong)
- Includes an animated battle between a **capybara knight hero** and a **dragon villain**

### Question Pool
- **20 vocab-based**: Vocabulary definitions shown as clues â†’ pick the correct term
- **17 MC-based**: Correct MC answers shown as clues â†’ pick the matching question (shortened paraphrases)
- **37 total questions** stored in `DEFAULT_JEOPARDY` array

### Quiz Modes (Settings Dialog)
Students choose before starting:
1. ðŸŽ² **Random Mix** â€” all 37 shuffled, category labels shown
2. ðŸ“š **Full Study** â€” vocab first (20), then definitions (17)
3. ðŸ“– **Vocabulary Only** â€” just the 20 vocab questions
4. âœï¸ **Definitions Only** â€” just the 17 definition questions

### Battle Gamification
- Canvas-drawn characters: capybara knight (left) vs dragon (right) on a sky/grass field
- **Correct answer** â†’ hero charges all the way to dragon, sword swing, comic "POW!" starburst on impact (~1.3s animation)
- **Wrong answer** â†’ dragon advances ~35%, shoots Bowser-style fireballs that travel to hero, comic "POW!" on impact (~1.7s animation)
- **Zelda-style hearts** (5 hearts, half-heart granularity) â€” hero HP scales to 30% threshold
- **Hero defeated** when >30% wrong â†’ slumped pose with cartoon X-eyes, option to restart or continue
- **Victory animation** (~1.8s) â€” dragon falls over with X-eyes, hero does a bounce-and-sway dance with sparkle stars
- Battle fully resets on retry
- All animations tuned for readability at kid-friendly pace

### Parent Mode
- **Answer Key** tab now includes Game Quiz answers (vocab + definition sub-sections)
- **Edit Game Quiz** tab allows editing all 37 clues, choices, and correct answers
- Sub-sections for vocab-based and definition-based questions
- Reset All to Defaults clears Game Quiz data alongside vocab and MC

### Architecture Decisions
- Single HTML file maintained â€” all CSS, HTML, JS inline in `index.html`
- Canvas API for character drawing and battle animations (no external images, CSP-compliant)
- SVG hearts rendered inline for Zelda-style HP display
- localStorage persists Game Quiz progress (mode, answers, HP, battle state)
- All user-facing strings sanitized with `esc()` for XSS prevention

### Testing
- `tests.html` â€” 43 unit tests run in-browser (no dependencies)
  - **Quiz Logic Suite**: data integrity (37 questions, 4 choices each, valid indices), shuffle correctness, mode filtering (vocab/defs/all/random), scoring, XSS sanitization
  - **Battle Logic Suite**: HP calculations (30% threshold), heart rendering (full/half/empty), defeat conditions, battle reset, damage mechanics
- Open `tests.html` in a browser to see green/red results
- Tests are development-only (not deployed to Azure)

## File Structure
```
socialtest/
â”œâ”€â”€ index.html              # The entire quiz app (vocab, MC, and Game Quiz)
â”œâ”€â”€ tests.html              # Unit tests (43 tests, open in browser to run)
â”œâ”€â”€ README.md               # Project overview and setup instructions
â”œâ”€â”€ WORKLOG.md              # This file â€” detailed work & decision log
â”œâ”€â”€ staticwebapp.config.json # Security headers (CSP, X-Frame-Options)
â””â”€â”€ .github/
    â””â”€â”€ workflows/          # Azure SWA deploy workflow (auto-generated)
```
